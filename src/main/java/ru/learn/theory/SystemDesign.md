### Степени двойки

| Степень | Примерное значение | Полное название | Сокращенное обозначение |
|---------|--------------------|-----------------|-------------------------|
| 10      | 1 тысяча           | 1 килобайт      | 1 КБ                    |
| 20      | 1 миллион          | 1 мегабайт      | 1 МБ                    |
| 30      | 1 миллиард         | 1 гигабайт      | 1 ГБ                    |
| 40      | 1 триллион         | 1 терабайт      | 1 ТБ                    |
| 50      | 1 квадриллион      | 1 петабайт      | 1 ПБ                    |

### ПОКАЗАТЕЛИ ЛАТЕНТНОСТИ

нс = наносекунда, мкс = микросекунда, мс = миллисекунда

* 1 нс = 10^-9 секунд
* 1 мкс = 10^-6 секунд = 1000 нс
* 1 мс = 10^-3 секунд = 1000 мкс = 1 000 000 нс

| Название операции                                    | Время                   |
|------------------------------------------------------|-------------------------|
| Обращение к кэшу L1                                  | 0,5 нс                  |
| Ошибочное предсказание перехода                      | 5 нс                    |
| Обращение к кэшу L2                                  | 7 нс                    |
| Блокирование/разблокирование мьютекса                | 100 нс                  |
| Обращение к основной памяти                          | 100 нс                  |
| Сжатие 1 Кб с помощью Zippy                          | 10 000 нс = 10 мкс      |
| Отправка 2 Кб по сети 1 Гбит/с                       | 20 000 нс = 20 мкс      |
| Последовательное чтение из памяти 1 Мб               | 250 000 нс = 250 мкс    |
| Перемещение пакета туда и обратно внутри одного ЦОД  | 500 000 нс = 500 мкс    |
| Время поиска по диску                                | 10 000 000 нс = 10 мс   |
| Последовательное чтение 1 Мб из сети                 | 10 000 000 нс = 10 мс   |
| Последовательное чтение 1 Мб с диска                 | 30 000 000 нс = 30 мс   |
| Передача пакета из Калифорнии в Нидерланды и обратно | 150 000 000 нс = 150 мс |

* память быстрая, а диск медленный;
* по возможности следует избегать поиска по диску;
* простые алгоритмы сжатия отличаются высокой скоростью;
* прежде чем отправлять данные по интернету, их по возможности нужно сжимать;
* центры обработки данных обычно находятся в разных регионах, и передача информации между ними занимает время.

### ПОКАЗАТЕЛИ ДОСТУПНОСТИ

Высокая доступность — это способность системы долго и непрерывно находиться в рабочем состоянии. Она измеряется в процентах. 100 % означает,
что сервис никогда не простаивает. У большинства сервисов доступность варьируется от 99 % и 100 %.

| Доступность | Суточный простой    | Недельный простой   | Месячный простой | Годичный простой |
|-------------|---------------------|---------------------|------------------|------------------|
| 99 %        | 14,40 минуты        | 1,68 часа           | 7,31 часа        | 3,65 дня         |
| 99,9 %      | 1,44 минуты         | 10,08 минуты        | 43,83 минуты     | 8,77 часа        |
| 99,99 %     | 8,64 секунды        | 1,01 минуты         | 4,38 минуты      | 52,60 минуты     |
| 99,999 %    | 864,00 миллисекунды | 6,05 секунды        | 26,30 секунды    | 5,26 минуты      |
| 99,9999 %   | 86,40 миллисекунды  | 604,80 миллисекунды | 2,63 секунды     | 31,56 секунды    |

### ПРИМЕР: ОЦЕНКА ТРЕБОВАНИЙ

Предположения:
* 300 миллионов активных пользователей в месяц;
* 50 % из них пользуются Twiter ежедневно;
* пользователи в среднем публикуют по 2 твита в день;
* 100 % твитов содержат медиаданные;
* данные хранятся на протяжении 5 лет.
  Оценки:
* ежедневные активные пользователи (daily active users, DAU) = 300 миллионов * 50 % = 150 миллионов;
* запросов в секунду (queries per second, QPS) = 150 миллионов * 2 твита / 24 часа / 3600 секунд = ~3500;
* пиковый показатель QPS = 2 * QPS = ~7000.
  Здесь мы оценим лишь место, необходимое для хранения данных:
  средний размер твита:
* tweet_id — 64 байта;
* текст — 140 байтов;
* медиаданные — 1 Мб;
* объем данных: 150 миллионов * 2 * 10% * 1 Мб = 30 Тб в день;
* объем данных за 5 лет: 30 Тб * 365 * 5 = ~55 Пб.

### Вопросы

* Какие именно возможности мы будем реализовывать?
* Сколько пользователей у нашего продукта?
* Как скоро ожидается наращивание мощностей? Какой масштаб планируется через 3 месяца, полгода, год?
* Как выглядит технологический стек компании? Какие существующие сервисы можно применить для упрощения архитектуры?

### Рекомендуется

* Всегда уточняйте. Не надейтесь на то, что ваши предположения окажутся верными.
* Определитесь с требованиями.
* Не существует правильного или лучшего ответа. У молодого стартапа и известной компании с миллионами пользователей разные архитектуры, которые решают разные задачи. Убедитесь в том, что вы понимаете требования.
* Делитесь мыслями с интервьюером. Общайтесь с ним.
* По возможности предложите разные подходы.
* Согласовав с интервьюером общую архитектуру, подробно обсудите каждый компонент. Начинайте проектирование с самых важных компонентов.
* Предлагайте разные идеи. Хороший интервьюер работает с кандидатом, как с членом своей команды.
* Никогда не сдавайтесь.

### Не рекомендуется
* Не приходите на интервью, не подготовившись к типичным вопросам.
* Не начинайте работать над решением, пока не уточните требования и собственные предположения.
* Не уделяйте сразу слишком много времени какому-то одному компоненту. Предложите общую архитектуру, а затем уже погружайтесь в детали.
* Если испытываете затруднения, не стесняйтесь обратиться за подсказкой.
* Опять же, не замыкайтесь в себе. Не рассуждайте молча.
* Не думайте, что интервью заканчивается, как только вы изложили свое решение. Интервьюер сам определяет, продолжать или нет. Постоянно интересуйтесь его мнением.

### Время, выделяемое на каждый этап
* Шаг 1. Понять задачу и определить масштаб: 3–10 минут.
* Шаг 2. Предложить общее решение и получить одобрение: 10–15 минут.
* Шаг 3. Подробное проектирование: 10–25 минут.
* Шаг 4. Подведение итогов: 3–5 минут.