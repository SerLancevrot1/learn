### Docker

Все ниже - **слои**

* **FROM**... - образ операционной системы, на который будет установлен сервис с зависимостями
* **WORKDIR** - установка рабочей папки
* **RUN** - выполняет команду внутри контейнера
* **EXPOSE** - порт
* **CMD** - команды при запуске

Команды

* **docker build** - собрать образ. -t = задать имя и версию
* **docker images** - посмотреть все образы
* **docker run** - создает и запускает контейнер из образа. -р = пробросить порты
* **docker compose up** - создает и запускает несколько контейнеров. Нужен конфиг файл

### K8S

ПО для оркестрации контейнеризированных приложений

**Master-компоненты (управляющие):**

* **Control Plane** - ответственный за состояние кластера. Через REST принимает команды на менеджмент кластера. Единственный экземпляр
  * **Control Manager** - ответственный за поднятие/выключение подов
  * **Scheduler** - планировщик, ответственный за менеджмент ресурсов
  * **etcd** - хранение информации о кластере
  * **API server** - главный интерфейс между Control Plane и кластером

_Другие высокоуровневые службы, хранятся в **etcd**_

* **Deployment** - описывает, сколько копий подов нужно запустить и как их обновлять
* **Service** - обеспечивает доступ к подам через стабильный адрес (балансировщик нагрузки)
* **ConfigMap** и Secret - хранят чувствительные данные
* **Autoscaling** - автоматически добавляет или убирает поды в зависимости от нагрузки

**Node-компоненты (рабочие):**

* **WorkerNode** - контейнеризирует и запускает поды. Ниже - составляющие каждой ноды
    * **Pod** - минимальная единица в K8S, обертка контейнера
    * **kublet** - отвечает за связь между подами и Control Plane
    * **Container** Runtime запускает контейнеры в подах, менеджмент ресурсов в контейнере
    * **Kube-proxy** - отвечает за роутинг трафика к подам (балансировка)

**Дополнительные инструменты и службы**

* **Ingress-контроллер** - перенаправление HTTP-запросов к внутренним сервисам.
* **Network Policy Controller** - можно задать правило, согласно которому определённый набор pod’ов может общаться только с другими
  доверенными pod’ами, исключив нежелательные подключения.
* **Service Discovery** - обеспечивает автоматическое обнаружение сервисов и координацию их связи внутри кластера. 

